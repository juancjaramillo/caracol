(()=>{"use strict";let{toString:e}=Object.prototype;function t(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":e.call(t)}function n(e){return"[object Array]"===t(e)}function i(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),n(e))for(let n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}function r(e){i(e,((e,t)=>{window[t]=e}))}function s(e){return"function"==typeof e}function o(e){return s(e)?(...t)=>!e(...t):!e}function a(e){const n=typeof e;return"string"===n||"object"===n&&null!=e&&!Array.isArray(e)&&"[object String]"===t(e)}function d(e,t=""){if(o(a(e)))throw new Error(`${t||e} should be a string!`)}function u(e,t=""){if(o(s(e)))throw new Error(`${t||e} should be a function!`)}function c(){}function l(e){return void 0===e}const h=e=>{d(e,"Event name")},m=e=>{u(e,"Handler")},f="HeaderBidding",p="format-init",g="format-programmatic-display-ad-size",b="sm";function v(e){return 1===e?.nodeType&&a(e.nodeName)}function w(e,t){return function n(i){return function(...r){const s=[...i,...r];return s.length>=e?t(...s):n(s)}}([])}function y(e){return null!==e&&("object"==typeof e||s(e))}function A(e){return y(e)&&!s(e)&&!n(e)}const E=w(2,((e,t)=>{if(n(t))return t.map(e);if(A(t))return Object.entries(t).reduce(((t,[n,i])=>Object.assign(t,{[n]:e(i,n)})),{});throw new Error(`Cannot apply map to ${t}`)}));function T(e){return"number"==typeof e}function C(e){return T(e)&&!Number.isNaN(e)}function $(e,t={},n=!1){if(o(v(e)))return;n&&e.removeAttribute("style");const i=function(e){return E(((e,t)=>(e=>["line-height"].every((t=>o(e.includes(t)))))(t)&&(e=>["top","left","right","bottom","width","height","margin","padding","border"].some((t=>e.includes(t))))(t)&&C(e)?`${e}px`:e),e)}(t);Object.assign(e.style,i)}const S="AdError";function D(e,...t){if(!s(e))throw new Error("pipe requires at least one function argument");return(...n)=>{const i=e(...n);return t.reduce(((e,t)=>t(e)),i)}}function I(...e){if(!e.length)throw new Error("compose requires at least one argument");return function(e){if(!s(e))throw new Error("reverseArgs argument must be a function");return(...t)=>e(...t.reverse())}(D)(...e)}function P(e){return!0===e||!1===e||"[object Boolean]"===t(e)}function N(e){if(function(e){return l(e)||null===e}(e)||T(e)||P(e))return!1;try{return 0===Object.keys(e).length}catch{return!0}}function O(e,t=0){const n=Math.pow(10,t);return Math.round(e*n)/n}function U(e){return a(e)&&""!==e}const L=w(2,((e,t)=>{if(n(t))return t.filter(e);if(A(t))return Object.entries(t).reduce(((t,[n,i])=>({...t,...e(i,n)&&{[n]:i}})),{});throw new Error(`Cannot apply filter to ${t}`)})),j=w(2,((e,t)=>L(o(e),t))),k=["openx"];function R(e){return E(j((e=>k.includes(e.bidder))),e)}const M=w(3,((e,t,i)=>{if(n(i))return i.reduce(e,t);if(A(i))return Object.entries(i).reduce(((t,[n,i])=>e(t,i,n)),t);throw new Error(`Cannot apply reduce to ${i}`)}));function z(e){return o(n(e))?0:1+M(((e,t)=>{const n=z(t);return n>e?n:e}),0,e)}const x={sharethrough:{geo:{countries:{type:"block",list:["CO","IT","PE","CL","PT","BO","DO","CR"]}}}};function B(e){const t=z(e);if(t<1||t>2)throw new Error("Malformed bidders");return(1===t?[e]:e).map((e=>e.map((e=>({...e,...x[e.bidder]&&{segmentation:{...x[e.bidder]}}})))))}const _=w((F=(e,t)=>o(n(e))||N(e)?t:E(j((t=>e.some((e=>e===t.join("x"))))),t)).length,F);var F;function H(e){const t=z(e);if(t<2||t>3)throw new Error("Malformed sizes");return 2===t?[e]:e}function W(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function q(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var V=new WeakSet,G=new WeakSet;class X extends class{constructor(e=c){this.debugLog=function(e,t=(()=>null)){return(...n)=>{try{return e(...n)}catch(e){return t(e,...n)}}}(e),this.listeners={}}on(e,t){h(e),m(t),this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(t)}once(e,t){m(t);const n=i=>{this.off(e,n),t.call(this,i)};this.on(e,n)}off(e,t){h(e),m(t);const n=this.listeners[e];if(l(n))return;const i=n.indexOf(t);n.splice(i,1),0===n.length&&delete this.listeners[e]}offAll(e){l(e)?this.listeners={}:(h(e),this.listeners[e]=[],delete this.listeners[e])}emit(e,t){h(e);const n=this.listeners[e];l(n)||n.forEach((e=>{try{e.call(this,t)}catch(e){this.debugLog({message:"Calling event listener",error:e})}}))}hasListeners(e){return h(e),Boolean(this.listeners[e]?.length)}}{constructor(e){super(),W(this,G),W(this,V),this.adDuration=-1,this.adRemainingTime=-1,this.adSkippableState=!1,this.$adUnit={},this.$slot={},this.adParameters={},this.macros={},this.tcData={},this.adTimeCounter={},this.bidders=[],this.sizes=[],this.prebid=e,this.playerChannel=null}getAdDuration(){return this.adDuration}getAdRemainingTime(){return this.adRemainingTime}getAdSkippableState(){return this.adSkippableState}handshakeVersion(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")||"2.0"}initAd(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{AdParameters:"{}",macros:{},tcData:{}},a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};try{var d,u,l,h;if(this.$slot=a.slot,this.adParameters=JSON.parse(s.AdParameters||"{}"),this.macros=s.macros||{},this.tcData=s.tcData||{},q(this,G,K).call(this,(null===(d=this.adParameters)||void 0===d?void 0:d.adDuration)||12),this.bidders=I(R,B)(null===(u=this.adParameters)||void 0===u?void 0:u.bidders),this.sizes=I(_(a.bannedSizes),H)(null===(l=this.adParameters)||void 0===l?void 0:l.sizes),this.geo=null===(h=a.extraData)||void 0===h?void 0:h.geo,this.sizes.every(N))throw new Error("No sizes");this.playerChannel=function(e,t){if(o(U(e)&&v(t)))throw new Error("Channel id must be a string and $target an HTMLElement");let n=[];return{sendMessage(n,i){const r=new CustomEvent(n,{detail:{channelId:e,message:i}});t.dispatchEvent(r)},addListener(i,r=c,{once:s=!1}={}){const o=n=>{n.detail?.channelId===e&&(s&&t.removeEventListener(i,o),r(n.detail.message))};t.addEventListener(i,o),n.push({messageType:i,handler:o})},close(){i(n,(({messageType:e,handler:n})=>{t.removeEventListener(e,n)})),n=[],this.sendMessage=c,this.addListener=c}}}(this.$slot.dataset.smSlotId,this.$slot),this.playerChannel.sendMessage(p,{type:f}),this.emit("AdLoaded")}catch(e){this.emit(S,e)}}startAd(){var e,t,n,i;const r={debug:!1,bidders:this.bidders,pageUrl:null===(e=this.adParameters)||void 0===e?void 0:e.pageUrl,publisher:null===(t=this.adParameters)||void 0===t?void 0:t.publisher,config:null===(n=this.adParameters)||void 0===n?void 0:n.config,sizes:this.sizes,userIds:null===(i=this.adParameters)||void 0===i?void 0:i.userIds,macros:this.macros,tcData:this.tcData,geo:this.geo};this.prebid(this.$slot,r).then((e=>{var t;let{$adUnit:n,bid:i}=e;this.$adUnit=n,this.adTimeCounter.set(),this.playerChannel.sendMessage(g,{width:Number(n.width),height:Number(n.height),bid:{advDomain:null===(t=i.adserverTargeting)||void 0===t?void 0:t.hb_adomain,auctionId:i.auctionId,bidderName:i.bidder,cpm:i.cpm,currency:i.currency,dealId:i.dealId}}),this.emit("AdStarted"),this.emit("AdImpression")})).catch((e=>{this.emit(S,e)}))}stopAd(){this.adTimeCounter.cancel(),this.emit("AdStopped")}pauseAd(){this.adTimeCounter.pause(),this.emit("AdPaused")}resumeAd(){this.adTimeCounter.resume(),this.emit("AdPlaying")}skipAd(){this.adSkippableState&&(this.adTimeCounter.cancel(),this.emit("AdSkipped"))}resizeAd(e,t){const{scale:n}=function({width:e,height:t},{width:n,height:i},{allowScaleUp:r,fillSlot:s}={}){const a=Number(e)&&Number(t)&&n&&i,d=e<=n&&t<=i;if(o(a)||d&&o(r||s))return{width:Math.min(Number(e)||0,n||0),height:Math.min(Number(t)||0,i||0),scale:1};const u=n/i,c=e/t,l=r=>O(r?i/t:n/e,5);if(s)return{width:n,height:i,scale:l(u<c)};const h=l(u>c);return{width:O(e*h,2),height:O(t*h,2),scale:h}}(this.$adUnit,{width:e,height:t});!function(e,t){$(e,{transform:`scale(${t})`,"transform-origin":"top left"})}(this.$adUnit,n),this.emit("AdSizeChange")}expandAd(){}collapseAd(){}subscribe(e,t,n){this.on(t,e.bind(n))}unsubscribe(e,t){this.off(t,e)}}function J(){this.adRemainingTime-=1,0===this.adRemainingTime&&(this.emit("AdVideoComplete"),this.stopAd())}function K(e){this.adDuration=e,this.adRemainingTime=e,this.adTimeCounter=function(e,{period:t=1e3,context:n,args:r=[],wind:a=window}={}){if(o(s(e)))return null;let d=null,u=null,l=0,h=null,m=t,f=c;function p(){h=Date.now(),e.apply(n,r)}function g(){l+=t,p()}function b(){a.clearInterval(d),a.clearTimeout(u),f()}return{state:0,getCurrentTime:()=>l,set(){1!==this.state&&(d=a.setInterval(g,t),m=t,h=Date.now(),this.state=1)},start(){1!==this.state&&(p(),this.set())},pause(){1!==this.state&&3!==this.state||(m-=Date.now()-h,b(),this.state=2)},async resume(){if(2===this.state){this.state=3,h=Date.now();try{await(e=m,new Promise(((t,n)=>{u=a.setTimeout(t,e),f=n}))),g(),this.set()}catch{}var e}},reset(){b(),this.state=0,l=0,this.set()},restart(){b(),this.state=0,l=0,this.start()},cancel(){b(),this.state=-1,i(this,((e,t)=>{s(this[t])&&(this[t]=c)}))}}}(q(this,V,J),{context:this})}const Q=e=>()=>new X(e);let Y=window;function Z(e={}){const{type:t="div",name:n=null,prefix:r=b,id:s=null,style:o=null,content:a=null,isHtmlContent:d=!0,events:u=null,children:c}=e;let l={...e.attributes};const h=Y.document.createElement(t),m=r?`${r}-`:"";if(n){const e=`${m}${n}${l.class?` ${l.class}`:""}`;delete l.class,l={class:e,...l}}return s&&(l={id:`${m}${n?`${n}-`:""}${s}`,...l}),i(l,((e,t)=>{"data"===t&&y(e)?i(e,((e,t)=>{h.setAttribute(`data-${t}`,e)})):h.setAttribute(t,e)})),a&&(d?h.innerHTML=a:h.textContent=a),o&&$(h,o),u&&i(u,((e,t)=>{var n;"click"===t?(n=e,h.addEventListener("click",n)):h.addEventListener(t,e)})),c&&ee(h,c),h}function ee(e,t){var r;o(T((r=e)?.nodeType)&&a(r.nodeName))||o(t)||I((t=>i(t,(t=>{v(t)?e.appendChild(t):y(t)&&e.appendChild(Z(t))}))),(e=>n(e)?e:[e]))(t)}I(o,U);const te="sm-prebid",ne={amx:{storageAllowed:!0},smartadserver:{storageAllowed:!0}},ie="LM",re="AN",se="adf",oe="adx2.adform.net";function ae(e){let{macros:t,geo:n}=e;const i=(e,t)=>"target"===t?e.replace(/,/g,";"):e,r=e=>U(e)||C(e)||P(e),s=e=>t[e],o=e=>{const t=I(E(i),L(r),E(s))(e.macroParams||{}),o=e.bidder===se?(e=>([ie,re].includes(n.group)&&(e.params.adxDomain=oe),e))(e):e;return{bidder:o.alias||o.bidder,params:{...o.params,...t}}};return e=>E(o,e||[])}function de(e){let{geo:t}=e;return j((e=>{var n,i;const{type:r,list:s}=(null==e||null===(n=e.segmentation)||void 0===n||null===(i=n.geo)||void 0===i?void 0:i.countries)||{};return!o(t.country&&r&&s)&&!N(s)&&("allow"===r&&o(s.includes(t.country))||"block"===r&&s.includes(t.country))}))}function ue(e){return e.flat()}const ce=e=>{try{return decodeURIComponent(e)}catch{return e}},le={iframeEnabled:!0,iframe:{bidders:"*",filter:"include"}},he={DEFAULT_VALIDATION:"off",ATTRIBUTE_SEPARATOR:",",NODE_SEPARATOR:"!",REGEX:/(\d+\.\d+,[0-1])(!([^[,!]+),([^[,!]+),([0-1]),([^[,!]+)?,([^[,!]+)?,([^[,!]+)?)+/,NODE_ATTRIBUTES:[{key:"asi",transformFn:e=>e},{key:"sid",transformFn:e=>ce(e)},{key:"hp",transformFn:e=>Number(e)},{key:"rid",transformFn:e=>ce(e)},{key:"name",transformFn:e=>ce(e)},{key:"domain",transformFn:e=>ce(e)}]};function me(e,t){const n=function(e){return he.REGEX.test(e)}(t);return o(e)&&o(n)?{}:function(e){const t=E((e=>e.split(he.ATTRIBUTE_SEPARATOR)),e.split(he.NODE_SEPARATOR)),n=t.shift();return{schain:{validation:he.DEFAULT_VALIDATION,config:{ver:n[0],complete:Number(n[1]),nodes:E((e=>M(((t,n,i)=>({...t,...e[i]&&{[n.key]:n.transformFn(e[i])}})),{},he.NODE_ATTRIBUTES)),t)}}}}(n?t:function(e){return`1.0,1!sunmedia.tv,${e},1,,,`}(e))}function fe(e){$(e.contentWindow.document.body,{padding:0,margin:0})}function pe(e){let{obtainConsentManagement:t}=e;return function(e,n){return function(e,t=1e3){let n;const i=new Promise(((e,i)=>{n=setTimeout((()=>{i(new Error(`Promise timed out in ${t} ms`))}),t)}));return Promise.race([e,i]).then((e=>(clearTimeout(n),e))).catch((e=>{throw clearTimeout(n),e}))}(function(e,t,n){let{pageUrl:s,publisher:a,bidders:c=[],sizes:l=[],userIds:h=[],macros:m={},tcData:f={},debug:p,config:g={},geo:b={}}=t;return new Promise(((t,v)=>{const w=function(e){let{code:t="",sizes:n=[],bids:i=[],macros:r={},geo:s={}}=e;return E(((e,i)=>({code:`${t}${i?`-${i}`:""}`,mediaTypes:{banner:{sizes:n[i]}},bids:I(ae({macros:r,geo:s}),de({geo:s}))(e)})),i)}({code:te,sizes:l,bids:c,macros:m,geo:b}),y=(A=c,I(E((e=>{let{bidder:t,alias:n}=e;return{adapter:t,alias:n}})),L(((e,t,n)=>{let{alias:i}=e;return i&&n.findIndex((e=>{let{alias:t}=e;return t===i}))===t})),ue)(A));var A;const T=n({tcString:m.gdpr_consent,gdprApplies:m.gdpr,...f}),C=function(e){let{consentManagement:t={},debug:n,pageUrl:i,publisher:r,config:s={},referrerUrl:o,supplyChain:a,userIds:d=[]}=e;return{consentManagement:t,...n&&{debug:n},userSync:{filterSettings:le,userIds:d},...me(r,a),...i&&o&&{pageUrl:o},...s}}({debug:p,publisher:a,pageUrl:s,referrerUrl:m.referrerurl,supplyChain:m.schain,userIds:h,consentManagement:T,config:g}),$={};r({pbjs:$});const S=Z({type:"iframe",id:te,prefix:null,style:{border:"none"},attributes:{scrolling:"no"}});ee(e,S);const D=(e,n)=>{const i=$.getHighestCpmBids();if(o(null==i?void 0:i.length))return void v(new Error("No bids"+(n?" (Prebid timed out)":"")));const r=i.reduce(((e,t)=>t.cpm>e.cpm?t:e));r.ad=`<body>${r.ad}</body>`,$.renderAd(S.contentWindow.document,r.adId),S.contentWindow.document.body?fe(S):function(e,t,n,i=(()=>!0)){u(n,"listener"),d(t,"event");const r=()=>{i()&&(e.removeEventListener(t,r),n())};e.addEventListener(t,r)}(S.contentWindow,"DOMContentLoaded",(()=>fe(S))),t({$adUnit:S,bid:r})};ee(document.head,Z({type:"script",attributes:{async:!0,src:"https://creatives.sunmedia.tv/vpaid_ssp_display/prebidadpjs7.13.0.js?v=v2023011001"},events:{load:()=>{o($.libLoaded)?v(new Error("No pbjs loaded")):($.que=$.que||[],$.bidderSettings={...$.bidderSettings,...ne,...M(((e,t)=>{let{adapter:n,alias:i}=t;return{...e,...ne[n]&&{[i]:ne[n]}}}),{},y)},$.que.push((()=>{i(y,(e=>{let{adapter:t,alias:n}=e;$.aliasBidder(t,n)})),$.setConfig(C),$.addAdUnits(w),$.requestBids({timeout:3e3,bidsBackHandler:D})})))}}}))}))}(e,n,t),7e3)}}r({getVPAIDAd:function(){return I(Q,pe)({obtainConsentManagement:()=>({cmpApi:"iab",timeout:1e4,allowAuctionWithoutConsent:!0})})()}})})();